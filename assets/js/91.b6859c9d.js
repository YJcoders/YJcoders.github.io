(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{513:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#区别"}},[s._v("#")]),s._v(" 区别")]),s._v(" "),t("ul",[t("li",[s._v("响应式原理不同")]),s._v(" "),t("li",[s._v("生命周期不同")]),s._v(" "),t("li",[s._v("vue2 是选项式 API，vue3 是组合式 API")]),s._v(" "),t("li",[s._v("diff 算法不同")]),s._v(" "),t("li",[s._v("打包优化-tree-shaking")]),s._v(" "),t("li",[s._v("事件缓存")]),s._v(" "),t("li",[s._v("v-if 和 v-for 的优先级不同")]),s._v(" "),t("li",[s._v("vue3 新增 Teleport 传送门组件")]),s._v(" "),t("li",[s._v("vue3 新增 异步组件（Suspense）")]),s._v(" "),t("li",[s._v("vue3 支持多个根节点（template 里面可以支持多个节点）")])]),s._v(" "),t("h3",{attrs:{id:"_1、响应式原理区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、响应式原理区别"}},[s._v("#")]),s._v(" 1、响应式原理区别")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("vue2 是利用 "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ES5")]),s._v(" Object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("definePropert")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("对数据进行劫持 结合 发布订阅模式的方式来实现的\nvue3 利用 Proxy 创建一个对象的代理，实现基本操作的拦截和自定义。本质上是通过拦截对象的内部方法的执行实现代理。\nVue3 中提供了 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reactive")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("和 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ref")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("两个方法将目标数据变为响应式数据\n\nObject"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineProperty")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("存在的问题：\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 能够监听到已有属性的获取和修改，不能监听对象的新增和删除属性的变化\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 解决方式：vue 定义了 Vue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("set 和 Vue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("delete 两个全局方法\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 不能监听数组 length 属性变化，\n  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" 解决方式：获取数组的原型，基于该原型创建新的数组对象；对数组方法进行重写"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" 防止污染原生数组方法\n\n利用 Proxy 实现数据劫持的优点：\n对于整个对象直接进行拦截，不用遍历属性依次添加 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v(" 和 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),s._v(" 属性\n直接监听数组的变化\nProxy返回一个新对象，可以只操作新对象，而Object"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("defineProperty只能遍历对象属性直接修改（需要用深拷贝进行修改）\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("h3",{attrs:{id:"_2、生命周期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、生命周期"}},[s._v("#")]),s._v(" 2、生命周期")]),s._v(" "),t("p",[t("img",{attrs:{src:"images/Vue/vue2%E5%92%8Cvue3%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png",alt:"生命周期"}})]),s._v(" "),t("h3",{attrs:{id:"_3、diff-算法不同"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、diff-算法不同"}},[s._v("#")]),s._v(" 3、diff 算法不同")]),s._v(" "),t("p",[s._v("vue2 中的虚拟 dom 是全量的对比\nvue3 在编译生成 VNode 时,新增了静态标记（patchflag），可在重新渲染时直接引用，无需 diff")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// patchFlags 字段类型列举")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("enum")]),s._v(" PatchFlags "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("TEXT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 动态文本内容")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CLASS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 动态类名")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("STYLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 动态样式")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PROPS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 动态属性，不包含类名和样式")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FULL_PROPS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 具有动态 key 属性，当 key 改变，需要进行完整的 diff 比较")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HYDRATE_EVENTS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 带有监听事件的节点")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("STABLE_FRAGMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 不会改变子节点顺序的 fragment")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("KEYED_FRAGMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 带有 key 属性的 fragment 或部分子节点")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("UNKEYED_FRAGMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 子节点没有 key 的fragment")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NEED_PATCH")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 只会进行非 props 的比较")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DYNAMIC_SLOTS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 动态的插槽")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("HOISTED")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 静态节点，diff阶段忽略其子节点")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BAIL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 代表 diff 应该结束")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h3",{attrs:{id:"_4、v-if-和-v-for-的优先级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4、v-if-和-v-for-的优先级"}},[s._v("#")]),s._v(" 4、v-if 和 v-for 的优先级")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("vue2：v"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v("的优先级高于v"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v("，可以放在一起使用，但是不建议这么做，会带来性能上的浪费\n\nvue3：v"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v("的优先级高于v"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v("，一起使用会报错。可以通过在外部添加一个标签，将v"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v("移到外层\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_5、事件缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5、事件缓存"}},[s._v("#")]),s._v(" 5、事件缓存")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"_6、打包优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6、打包优化"}},[s._v("#")]),s._v(" 6、打包优化")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("将全局api：nextTick等单独提取出来，不使用，不会被打包，减小包体积\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);